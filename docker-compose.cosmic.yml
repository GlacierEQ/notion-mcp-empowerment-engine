# üåü SOVEREIGNASCENSIONPROTOCOLV12.20COSMICAPEX - COMPLETE DEPLOYMENT
# Ultra-Enhanced MCP Infrastructure with LionAGI Integration
# Case: 1FDV-23-0001009 Hawaii Family Court Optimization

version: '3.8'

services:
  # ü¶Å LIONAGI MCP ORCHESTRATOR
  lionagi-orchestrator:
    build:
      context: ./src/lionagi-integration
      dockerfile: Dockerfile.lionagi
    container_name: lionagi-cosmic-orchestrator
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - PERPLEXITY_API_KEY=${PERPLEXITY_API_KEY}
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - NOTION_TOKEN=${NOTION_TOKEN}
      - LIONAGI_SESSION_PERSISTENCE=true
      - QUANTUM_PROCESSING=enabled
      - FEDERAL_FORENSIC_MODE=true
      - CASE_ID=1FDV-23-0001009
      - HAWAII_COURT_MODE=true
    volumes:
      - ./projects:/app/projects
      - ./logs:/app/logs
      - lionagi-sessions:/app/sessions
    ports:
      - "8000:8000"
      - "8001:8001"
    networks:
      - cosmic-network
    restart: unless-stopped
    depends_on:
      - redis-commander
      - postgres-quantum

  # üß† FILESYSTEM MCP V7 - QUANTUM ENHANCED
  filesystem-mcp:
    build:
      context: ./src/mcp-servers/filesystem
      dockerfile: Dockerfile
    container_name: filesystem-quantum-mcp
    environment:
      - QUANTUM_SCAN_ENABLED=true
      - PROCESSING_SPEED=0.1_seconds_per_file
      - STORAGE_PATHS=/projects/Dropbox,/projects/OneDrive,/projects/iCloudDrive,/projects/HardDrive,/projects/Quantum
      - DEDUPLICATION_METHOD=quantumhash
      - FEDERAL_FORENSIC=true
    volumes:
      - ./projects:/projects:ro
      - ./temp:/tmp/processing
    networks:
      - cosmic-network
    restart: unless-stopped

  # ‚öñÔ∏è LEGAL DOCUMENT GENERATOR V1
  legal-generator:
    build:
      context: ./src/mcp-servers/legal
      dockerfile: Dockerfile.legal
    container_name: legal-document-engine
    environment:
      - OUTPUT_PATH=/app/casefiles
      - TEMPLATES_PATH=/app/templates
      - LEGAL_DB_LEXIS=${LEXISNEXIS_API_KEY}
      - LEGAL_DB_WESTLAW=${WESTLAW_API_KEY}
      - JURISDICTION=Hawaii_Family_Court
      - CASE_CONTEXT=1FDV-23-0001009
      - TRO_GENERATION_SPEED=10_seconds
      - HRS_586_4_COMPLIANCE=true
    volumes:
      - ./casefiles:/app/casefiles
      - ./templates:/app/templates
    networks:
      - cosmic-network
    restart: unless-stopped

  # üîç EVIDENCE FUSION V9 - QUANTUM CORRELATION
  evidence-fusion:
    build:
      context: ./src/mcp-servers/evidence
      dockerfile: Dockerfile.evidence
    container_name: evidence-fusion-quantum
    environment:
      - FUSION_LAYERS=storylineCoherenceMapping,contradictionResistanceWovenNodes,emotionalSalienceEnhancers,temporalThreadSynchronizers
      - QUANTUM_CORRELATION=enabled
      - ACCURACY_THRESHOLD=0.9999
      - STORAGE_SYNC_TARGETS=projectsDropbox,projectsOneDrive,projectsiCloudDrive,projectsQuantum
      - CHAT_CATEGORIZATION=quantumlda
      - BLOCKCHAIN_AUDIT=true
    volumes:
      - ./projects:/projects
      - ./evidence-vault:/app/vault
    networks:
      - cosmic-network
    restart: unless-stopped

  # üéÆ VR ARCHITECT - COSMIC COURTROOM
  vr-architect:
    build:
      context: ./src/mcp-servers/vr
      dockerfile: Dockerfile.vr
    container_name: vr-cosmic-courtroom
    environment:
      - VR_ENGINE=cosmic-resonance
      - COURTROOM_TYPE=Hawaii_Family_Court
      - JUDICIAL_THEMES=cosmic-enhanced
      - REHEARSAL_MODE=true
      - CASE_VISUALIZATION=1FDV-23-0001009
    volumes:
      - ./vr-sessions:/app/sessions
      - ./courtroom-assets:/app/assets
    ports:
      - "9000:9000"
    networks:
      - cosmic-network
    restart: unless-stopped

  # üåê GITHUB TOOLKIT - INTELLIGENCE MATRIX
  github-intelligence:
    build:
      context: ./src/mcp-servers/github
      dockerfile: Dockerfile.github
    container_name: github-intelligence-matrix
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - REPO_ANALYSIS_DEPTH=forensic
      - AUTONOMOUS_ENHANCEMENT=true
      - MULTI_MODEL_COORDINATION=true
      - EVIDENCE_LOGGING=enabled
    volumes:
      - ./github-intelligence:/app/intelligence
      - ./repos:/app/repos
    networks:
      - cosmic-network
    restart: unless-stopped

  # üóÉÔ∏è REDIS COMMANDER - SESSION MANAGEMENT
  redis-commander:
    image: redislabs/redismod:latest
    container_name: redis-quantum-commander
    environment:
      - REDIS_MODULES=ReJSON,RediSearch,RedisGraph,RedisTimeSeries
    volumes:
      - redis-data:/data
      - ./redis-config:/usr/local/etc/redis
    ports:
      - "6379:6379"
      - "8081:8001"
    networks:
      - cosmic-network
    restart: unless-stopped

  # üóÑÔ∏è POSTGRES QUANTUM - FORENSIC GRADE STORAGE
  postgres-quantum:
    image: postgres:15-alpine
    container_name: postgres-forensic-vault
    environment:
      - POSTGRES_DB=cosmic_mcp_vault
      - POSTGRES_USER=cosmic_operator
      - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
      - POSTGRES_INITDB_ARGS="--encoding=UTF8 --data-checksums"
    volumes:
      - postgres-data:/var/lib/postgresql/data
      - ./sql-init:/docker-entrypoint-initdb.d
    ports:
      - "5432:5432"
    networks:
      - cosmic-network
    restart: unless-stopped

  # üîê SMITHERY REGISTRY CLIENT
  smithery-client:
    build:
      context: ./src/mcp-servers/smithery
      dockerfile: Dockerfile.smithery
    container_name: smithery-cosmic-client
    environment:
      - SMITHERY_API_KEY=7bc1cbd9-6079-4f0a-b5f7-260d11900e4b
      - REGISTRY_ENDPOINT=https://registry.smithery.ai/servers
      - MCP_DISCOVERY=auto
      - SERVER_COUNT=7482
    networks:
      - cosmic-network
    restart: unless-stopped

  # üîÑ MESH SYNC PROTOCOL
  mesh-sync:
    build:
      context: ./src/mcp-servers/mesh
      dockerfile: Dockerfile.mesh
    container_name: mesh-sync-orchestrator
    environment:
      - SYNC_ENDPOINTS=openaiapi,geminiapi,mcpfilesystem,dropboxapi,onedriveapi,googledriveapi,taskadeapi,pineconeapi,supabaseapi,crewaiapi
      - SYNC_INTERVAL=1s
      - PARALLEL_EXECUTION=true
      - QUANTUM_DEDUPLICATION=true
    networks:
      - cosmic-network
    restart: unless-stopped

  # üåê NGINX REVERSE PROXY
  nginx-cosmic:
    image: nginx:alpine
    container_name: nginx-cosmic-gateway
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/nginx/ssl
    ports:
      - "80:80"
      - "443:443"
    networks:
      - cosmic-network
    restart: unless-stopped
    depends_on:
      - lionagi-orchestrator
      - vr-architect

volumes:
  redis-data:
    driver: local
  postgres-data:
    driver: local
  lionagi-sessions:
    driver: local

networks:
  cosmic-network:
    driver: bridge
    driver_opts:
      com.docker.network.bridge.name: cosmic-mcp-bridge
    ipam:
      config:
        - subnet: 172.20.0.0/16
          gateway: 172.20.0.1
